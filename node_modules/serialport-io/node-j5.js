/* jshint ignore: start */
//jscs: disable
'use strict';

var five = require('johnny-five');
// have a ready serial port, do something with it:
var board = new five.Board();
board.on('ready', function() {
  console.log('actually connected to an arduino!');
/*
  var motor = new five.Motor({
    invertPWM: true,
    pins: {
      pwm: 3,
      dir: 12
    }
  });

  motor.stop();

  board.repl.inject({
    motor: motor
  });
*/
  var eyes = new five.IR.Reflect.Array({
    emitter: 13,
    pins: ['A0', 'A1', 'A2', 'A3', 'A4', 'A5'],
    freq: 200
  });

  var calibrating = true;
  eyes.calibrateUntil(function() {
    return !calibrating;
  });

  setTimeout(function() { calibrating = false; }, 5000 )

/*
  eyes.on("line", function(err) {
    console.log("line: ", this.line);
  });
*/
  eyes.on("data", function(err) {
    console.log("data: ", this.raw);
  });
  eyes.enable();
  //var led = new five.Led(7);
  //led.blink();
  //var proximity = new five.Proximity({
  //  pin: 'A0'
  //});
  //proximity.on("data", function() {
  //  console.log(this.cm + "cm", this.in + "in");
  //});
  //
  //proximity.on("change", function() {
  //  console.log("The obstruction has moved.");
  //});

  //Need another firmware for that
  //var ping = new five.Ping(8);
  //ping.on("change", function() {
  //  console.log(this.cm + 'cm');
  //});

  //var servo = new five.Servo(10);
  //servo.sweep();
});

